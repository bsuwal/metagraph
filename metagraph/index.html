<!DOCTYPE html>
<html>

<head>
  <title>Welcome to Gridlandia!</title>
  <meta name="viewport" content="maximum-scale=1.0,width=device-width,initial-scale=1.0,user-scalable=0">
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header>
    <h1> Welcome to Gridlandia!</h1>
    <span class="author">an interactive introduction to the math of redistricting</span>
    <img width="200" src="imgs/blankgrid.png?raw=true" alt="A 4-by-4 grid">
    <summary>
      This project uses interactive widgets and visualizations to explore some of the mathematical tools used to
      analyze the mathematics of electoral redistricting, especially the question of 
      <em>detecting gerrymanders</em>. We use very small 
      examples---4x4, 5x5, and 7x7 grids---to develop and demonstrate some analytical techniques. We begin
      with the
      construction of a <em>"metagraph"</em> on the 4x4 grid, build up to the <em>statistical techniques</em> to determine
      whether a plan is an partisan outlier on the 5x5 grid, and conclude with a demo of basic <em>Markov chain Monte Carlo</em> methods for
      understanding the universe of possible districting plans on the 7x7 grid.
    </summary>
  </header>

  <main>
    <p>
      The nation of Gridlandia is trying to draw voting districts for its upcoming elections. The rules are that there must be
      four districts and each district must be made up of four contiguous units. (Basically, each district
      looks like a tetris piece.)
      Since Gridlandia is laid out neatly
      in a four-by-four grid, it's not too hard to write all of the allowed districting plans down. 
      There turn out to be only 117 of them.
    </p>

    <figure>
      <figcaption>Here is one:</figcaption>
      <img src="imgs/fillgrid.png?raw=true">
    </figure>

    <p>
      We can impose a <em>graph</em> or <em> network</em> structure to organize 
      the collection of all of those 117 districting options.
      We'll let each valid plan be represented by a node in this network, and we'll
      connect two nodes with an edge if the plans they represent
      are related by a simple <em>swap move</em>, exchaning the district assignments
      of two cells in adjacent districts.
    </p>
    <figure>
      <div>
        <img src="imgs/fillgrid.png?raw=true">
        <img src="imgs/showswapgrid.png?raw=true">
        <img src="imgs/swapgrid.png?raw=true">
      </div>
      <figcaption>
        We can transfom the plan on the left into the plan on the right by swapping the
        colors of two cells, shown in gray in the middle image.
      </figcaption>
    </figure>

    <p>
      We call this structure the <strong>metagraph of districting plans</strong>. Below, you can interact with this
      mathematical object. The graph on the left is the full metagraph of Gridlandia. Since Gridlandia is so symmetric, it
      might
      be useful to consider two districting plans to be <em>the same</em> if one can be transformed into the other by
      rotating or
      flipping the plan. For example,
    </p>

    <figure>
      <div>
        <img src="imgs/fillgrid.png?raw=true">
        <img src="imgs/rotgrid.png?raw=true">
      </div>
      <figcaption>
        We can transfom the plan on the left into the plan on the right by rotating 90 degrees.
      </figcaption>
    </figure>

    <p>
      The graph on the right is the metagraph where plans which are symmetric are merged into the same node, and two
      nodes are linked if any two of their two constituent nodes are linked in the full metagraph. Mouse over a node in
      the graph on the left to see the corresponding plan and highlight all of the other nodes corresponding to
      symmetric
      plans. Click a node to highlight all of its neighbors. Clicking a node in the graph on the right will highlight
      all
      nodes in that symmetry class in the graph on the left as well as all of the neighbors of all of those plans.</p>

    <div id="chart1" class="chart center"></div>

    <p>
      Now let's think about elections in Gridlandia. Gridlandia has plurality elections and two political parties, the
      <span class="purple">Purple</span> Party and the <span class="orange">Orange</span>
      Party. For simplicity, we'll start by assuming that everyone in the same cell votes the same way -- either for
      the
      <span class="purple">Purple</span> candidate or the <span class="orange">Orange</span>
      candidate. Within each district, the candidate which gets the most votes wins the election, and ties are not
      resolved. Below, click a cell once to change its color. On the left, the nodes in the metagraph will change color
      to indicate which party wins a legislative majority under the corresponding plan. A node will remain grey if the
      number of <span class="purple">Purple</span>- and <span class="orange">Orange</span>-favoring
      districts is equal.</p>

    <div id="chart2" class="chart center"></div>

    <p>
      Let's make things a little more realistic. Instead of each cell voting entirely for one party, there are some
      <span class="purple">Purple</span> and some <span class="orange">Orange</span>
      supporters in each cell -- a total of ten in each square. The same electoral rules apply, but now we can think
      about a <em>distribution</em> of votes in each cell. Left click on a square to increase the percentage of
      <span class="orange">Orange</span>
      voters, or right click it to decrease the percentage of <span class="orange">Orange</span> voters.</p>

    <p>
      What happens when the <span class="orange">Orange</span> party has a slight majority in most of the
      cells but a few are 90 or 100 percent <span class="purple">Purple</span>? Under which configurations
      can the minority party still win three out of four districts? Are there any distributions of voters that cause
      there to be a <span class="purple">Purple</span> colored metagraph node surrounded entirely by <span class="orange">Orange</span>
      colored nodes?
    </p>

    <div id="chart3" class="chart center"></div>

    <p>
      If we're interested in studying redistricting in the real-world, we'll need techniques which work on cases which
      are more complex than a 4x4 grid. We will develop some of these techniques using the 5x5 grid, which has a much
      larger set of valid districting plans.
    </p>

  </main>

  <nav>
    <a href="./5x5.html" class="next"> Check out
      statistical techniques on the 5x5 grid &raquo;</a>
  </nav>

  <footer>
    <p>
      This interactive was principally developed by <a href="http://zachschutzman.com/">Zachary Schutzman</a>
      at the <a href="http://gerrydata.org">Voting Rights Data Institute</a> in 
      Summer 2018 and is based on joint work with
      Seth Drew, Eugene Henninger-Voss, Amara Jaeger, and Heather Newman.
      Special thanks to Mira Bernstein, whose <a href="https://docs.google.com/spreadsheets/d/1U8XXRwwJ3zLLu9Xx-xsrePBFsCXkYYFj_MB4t-ZaZ4k/edit#gid=2131508220">Liliputia
        project</a> served as inspiration.
    </p>
    <p>
      <a href="https://github.com/gerrymandr/gridlandia">
        <img class="github" src="./GitHub-Mark-64px.png" alt="View the source on GitHub">
      </a>
    </p>
  </footer>

  <script src="loc_d3v3.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="src-meta5/header.js"></script>
  <script src="src-meta4/biggraph.js"></script>
  <script src="src-meta4/smallgraph.js"></script>
  <script src="src-meta4/ising1-4.js"></script>
  <script src="src-meta4/ising2-4.js"></script>
  <script src="src-meta4/ising1-4-p.js"></script>
  <script src="src-meta4/ising2-4-p.js"></script>
</body>

</html>
